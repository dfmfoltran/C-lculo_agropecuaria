<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Calculadora de Pre√ßos</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 30px;
    }
    input, label {
      margin-bottom: 10px;
      display: block;
    }
    .bloco {
      margin-bottom: 30px;
      padding: 15px;
      border: 1px solid #ccc;
      border-radius: 8px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }
    th, td {
      border: 1px solid #999;
      padding: 8px;
      text-align: center;
    }
    th {
      background-color: #eee;
    }
  </style>
</head>
<body>

  <h2>üî¢ Calculadora de Pre√ßo por Estado</h2>

  <div class="bloco">
    <h3>üîß Custos e Par√¢metros</h3>
    <label>
      Custo do Produto (R$):
      <input type="number" id="custo" step="0.01">
    </label>
    <label>
      Frete M√©dio (R$):
      <input type="number" id="frete" step="0.01">
    </label>
    <label>
      Margem m√≠nima de lucro (%):
      <input type="number" id="margemMinima" value="15" step="0.01">
    </label>
  </div>

  <div class="bloco">
    <h3>üìä Pre√ßo dos Concorrentes</h3>
    <label>
      Concorrente SP (R$):
      <input type="number" id="concorrenteSP" step="0.01">
    </label>
    <label>
      Concorrente RJ (R$):
      <input type="number" id="concorrenteRJ" step="0.01">
    </label>
    <label>
      Concorrente MG (R$):
      <input type="number" id="concorrenteMG" step="0.01">
    </label>
  </div>

  <button onclick="calcularPrecosRecomendados()">Calcular Pre√ßos Recomendados</button>

  <div id="resultado"></div>

  <script>
    function calcularPrecosRecomendados() {
      const custo = parseFloat(document.getElementById('custo').value) || 0;
      const frete = parseFloat(document.getElementById('frete').value) || 0;
      const margemMinima = parseFloat(document.getElementById('margemMinima').value) || 15;

      const concorrenteSP = parseFloat(document.getElementById('concorrenteSP').value) || 0;
      const concorrenteRJ = parseFloat(document.getElementById('concorrenteRJ').value) || 0;
      const concorrenteMG = parseFloat(document.getElementById('concorrenteMG').value) || 0;

      // Impostos
      const impostoSP = 0.06;
      const impostoRJ = 0.06 + 0.18; // Simples + ICMS interestadual
      const impostoMG = 0.06 + 0.12;

      // Pre√ßo m√≠nimo necess√°rio (custo + frete + margem m√≠nima + impostos)
      function calcularPrecoFinal(custo, frete, impostoTotal, margem) {
        const custoTotal = custo + frete;
        const precoLiquido = custoTotal * (1 + margem / 100);
        const precoFinal = precoLiquido / (1 - impostoTotal);
        return precoFinal;
      }

      const precoSP = calcularPrecoFinal(custo, frete, impostoSP, margemMinima);
      const precoRJ = calcularPrecoFinal(custo, frete, impostoRJ, margemMinima);
      const precoMG = calcularPrecoFinal(custo, frete, impostoMG, margemMinima);

      // Lucro com base no pre√ßo dos concorrentes
      function calcularLucro(precoVenda, custo, frete, imposto) {
        const receitaLiquida = precoVenda * (1 - imposto);
        const custoTotal = custo + frete;
        return receitaLiquida - custoTotal;
      }

      const lucroSP = calcularLucro(concorrenteSP, custo, frete, impostoSP);
      const lucroRJ = calcularLucro(concorrenteRJ, custo, frete, impostoRJ);
      const lucroMG = calcularLucro(concorrenteMG, custo, frete, impostoMG);

      const resultadoHTML = `
        <h3>üìÑ Resultado</h3>
        <table>
          <thead>
            <tr>
              <th>Estado</th>
              <th>Pre√ßo M√≠nimo Recomendado (R$)</th>
              <th>Pre√ßo Concorrente (R$)</th>
              <th>Lucro com Concorrente (R$)</th>
              <th>Lucro com Recomendado (R$)</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>SP</td>
              <td>${precoSP.toFixed(2)}</td>
              <td>${concorrenteSP.toFixed(2)}</td>
              <td>${lucroSP.toFixed(2)}</td>
              <td>${calcularLucro(precoSP, custo, frete, impostoSP).toFixed(2)}</td>
            </tr>
            <tr>
              <td>RJ</td>
              <td>${precoRJ.toFixed(2)}</td>
              <td>${concorrenteRJ.toFixed(2)}</td>
              <td>${lucroRJ.toFixed(2)}</td>
              <td>${calcularLucro(precoRJ, custo, frete, impostoRJ).toFixed(2)}</td>
            </tr>
            <tr>
              <td>MG</td>
              <td>${precoMG.toFixed(2)}</td>
              <td>${concorrenteMG.toFixed(2)}</td>
              <td>${lucroMG.toFixed(2)}</td>
              <td>${calcularLucro(precoMG, custo, frete, impostoMG).toFixed(2)}</td>
            </tr>
          </tbody>
        </table>
      `;

      document.getElementById('resultado').innerHTML = resultadoHTML;
    }
  </script>
</body>
</html>
